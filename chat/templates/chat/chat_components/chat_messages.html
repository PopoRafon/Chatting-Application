{% load static %}
{% load time_filters %}

{% for message in messages %}
    <li class="flex relative group/toolbar rounded-xl hover:bg-zinc-800/30 px-2 mt-4">
        <div class="top-0 left-0 h-full w-14 mr-3 mt-1">
            <img src="{{ message.sender.profile.avatar.url }}" class="rounded-full h-12 w-12">
        </div>
        <div class="w-full overflow-y-auto invisible-scrollbar">
            <div class="block">
                <span class="cursor-pointer hover:underline">{{ message.sender.profile.alias }}</span>
                <span class="text-sm text-zinc-500">{{ message.created|formatted_time }}</span>
            </div>
            <div>
                <div>
                    <p class="text-base block whitespace-pre-line break-words">{{ message.body }}</p>
                </div>
                <div class="ml-3 text-sm w-1/6">
                    {% if message.was_modified %}
                        <span class="group/modified text-zinc-500">
                            (modified)
                            <span class="hidden absolute rounded-md group-hover/modified:block transform -translate-y-12 -translate-x-4 bg-zinc-700 text-white py-1 px-2">
                                {{ message.modified|formatted_time }}
                            </span>
                        </span>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="hidden absolute group-hover/toolbar:inline-flex top-0 right-0 mr-2 rounded-md transform -translate-y-1/2 text-center bg-zinc-700 border border-zinc-800">
            <button class="flex justify-center items-center p-1 rounded-tl-md rounded-bl-md hover:bg-zinc-600">
                <img src="{% static 'images/buttons/add_emote_button.png' %}" class="w-6 h-6">
            </button>
            <button class="flex justify-center items-center p-1 hover:bg-zinc-600">
                <img src="{% static 'images/buttons/edit_message_button.png' %}" class="w-6 h-6">
            </button>
            <button class="flex justify-center items-center p-1 rounded-tr-md rounded-br-md hover:bg-zinc-600">
                <img src="{% static 'images/buttons/delete_message_button.png' %}" class="w-6 h-6">
            </button>
        </div>
    </li>
{% endfor %}